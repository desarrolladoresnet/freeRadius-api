<!doctype html>
<html class="no-js" lang="">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="x-ua-compatible" content="ie=edge">
        <title>free-radius-api documentation</title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <link rel="icon" type="image/x-icon" href="../images/favicon.ico">
	   <link rel="stylesheet" href="../styles/style.css">
        <link rel="stylesheet" href="../styles/dark.css">
    </head>
    <body>

        <div class="navbar navbar-default navbar-fixed-top d-block d-sm-none">
            <a href="../" class="navbar-brand">free-radius-api documentation</a>
            <button type="button" class="btn btn-default btn-menu ion-ios-menu" id="btn-menu"></button>
        </div>

        <div class="xs-menu menu" id="mobile-menu">
                <div id="book-search-input" role="search"><input type="text" placeholder="Type to search"></div>            <compodoc-menu></compodoc-menu>
        </div>

        <div class="container-fluid main">
           <div class="row main">
               <div class="hidden-xs menu">
                   <compodoc-menu mode="normal"></compodoc-menu>
               </div>
               <!-- START CONTENT -->
               <div class="content injectable">
                   <div class="content-data">








<ol class="breadcrumb">
  <li class="breadcrumb-item">Injectables</li>
  <li class="breadcrumb-item" >AppService</li>
</ol>

<ul class="nav nav-tabs" role="tablist">
        <li class="nav-item">
            <a href="#info" 
                class="nav-link"
                class="nav-link active"
                role="tab" id="info-tab" data-bs-toggle="tab" data-link="info">Info</a>
        </li>
        <li class="nav-item">
            <a href="#source" 
                class="nav-link"
                
                role="tab" id="source-tab" data-bs-toggle="tab" data-link="source">Source</a>
        </li>
</ul>

<div class="tab-content">
    <div class="tab-pane fade active in" id="info">
        <p class="comment">
            <h3>File</h3>
        </p>
        <p class="comment">
            <code>src/app.service.ts</code>
        </p>


            <p class="comment">
                <h3>Description</h3>
            </p>
            <p class="comment">
                <p>Este servicio tiene como objetivo crear un nuevo userinfo, radcheck y radusergroup en una solo peticion para llenar los datos de las tablas. Por ende, solo se encuentra una unica peticion PUT en esta clase.</p>

            </p>



            <section data-compodoc="block-index">
    <h3 id="index">Index</h3>
    <table class="table table-sm table-bordered index-table">
        <tbody>

                <tr>
                    <td class="col-md-4">
                        <h6><b>Methods</b></h6>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <ul class="index-list">
                            <li>
                                    <span class="modifier">Async</span>
                                <a href="#postUser" >postUser</a>
                            </li>
                        </ul>
                    </td>
                </tr>





        </tbody>
    </table>
</section>

            <section data-compodoc="block-constructor">
    <h3 id="constructor">Constructor</h3>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
<code>constructor(userInfoRepository, userGroupRepository, radcheckRepository)</code>
                    </td>
                </tr>
                        <tr>
                            <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="11" class="link-to-prism">src/app.service.ts:11</a></div>
                            </td>
                        </tr>

                <tr>
                    <td class="col-md-4">
                            <div class="io-description"><p>Se inyecta respositorios para los modelos de las tablas a usar.
userGroupRepository obtiene de la tabla &#39;radusergroup&#39;, se acorto el nombre para facilitar el manejo, de usarse muchas mas tablas se aconseja modificar y usar el nombre completo.</p>
</div>
                            <div>
                                    <b>Parameters :</b>
                                    <table class="params">
                                        <thead>
                                            <tr>
                                                <td>Name</td>
                                                <td>Optional</td>
                                            </tr>
                                        </thead>
                                        <tbody>
                                                <tr>
                                                        <td>userInfoRepository</td>
                                                  
                                                  
                                                    <td>
                                                            No
                                                    </td>
                                                    
                                                </tr>
                                                <tr>
                                                        <td>userGroupRepository</td>
                                                  
                                                  
                                                    <td>
                                                            No
                                                    </td>
                                                    
                                                </tr>
                                                <tr>
                                                        <td>radcheckRepository</td>
                                                  
                                                  
                                                    <td>
                                                            No
                                                    </td>
                                                    
                                                </tr>
                                        </tbody>
                                    </table>
                            </div>
                    </td>
                </tr>
            </tbody>
        </table>
</section>

            <section data-compodoc="block-methods">
    
    <h3 id="methods">
        Methods
    </h3>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="postUser"></a>
                    <span class="name">
                        <span class="modifier">Async</span>
                        <span ><b>postUser</b></span>
                        <a href="#postUser"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>postUser(dto: <a href="../classes/UserDto.html" target="_self">UserDto</a>)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="35"
                            class="link-to-prism">src/app.service.ts:35</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>este metodo llenara las tablas userinfo, radcheck y radusergroup.
No todos los valores son obligatorio pero algunos si en orden de no dejar campos vacios en la tabla. Encontrara que muchos campos son evaluado para ver si son llenados con informacion entrante, si el campo no existe o esta vacio se llena con ifo colocado apra funcionar por defecto.
Consulte el archivo &#39;user.dto.ts&#39; en &#39;src/dto/&#39;  para ver todos los campos.</p>
</div>

                    <div class="io-description">
                        <b>Parameters :</b>
                        
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>dto</td>
                                    <td>
                                                <code><a href="../classes/UserDto.html" target="_self" >UserDto</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>    <code>unknown</code>

                    </div>
                    <div class="io-description">
                        <p>, userinfo, radcheck }</p>

                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</section>

    </div>


    <div class="tab-pane fade  tab-source-code" id="source">
        <pre class="line-numbers compodoc-sourcecode"><code class="language-typescript">import { Inject, Injectable } from &#x27;@nestjs/common&#x27;;
import { UserInfo } from &#x27;./sequeelize/user/user.entity&#x27;;
import { UserDto } from &#x27;./dto/user.dto&#x27;;
import { UserGroup } from &#x27;./sequeelize/radusergroup/usergroup.entity&#x27;;
import { RadCheck } from &#x27;./sequeelize/rasdusercheck/radcheck.entity&#x27;;

/**
 * Este servicio tiene como objetivo crear un nuevo userinfo, radcheck y radusergroup en una solo peticion para llenar los datos de las tablas. Por ende, solo se encuentra una unica peticion PUT en esta clase.
 */
@Injectable()
export class AppService {
  /**
   * Se inyecta respositorios para los modelos de las tablas a usar.
   * userGroupRepository obtiene de la tabla &#x27;radusergroup&#x27;, se acorto el nombre para facilitar el manejo, de usarse muchas mas tablas se aconseja modificar y usar el nombre completo.
   * @param userInfoRepository
   * @param userGroupRepository
   * @param radcheckRepository
   */
  constructor(
    @Inject(&#x27;USER_REPOSITORY&#x27;)
    private userInfoRepository: typeof UserInfo,
    @Inject(&#x27;USERGROUP_REPOSITORY&#x27;)
    private userGroupRepository: typeof UserGroup,
    @Inject(&#x27;RADCHECK_REPOSITORY&#x27;)
    private radcheckRepository: typeof RadCheck,
  ) {}
  /**
   * este metodo llenara las tablas userinfo, radcheck y radusergroup.
   * No todos los valores son obligatorio pero algunos si en orden de no dejar campos vacios en la tabla. Encontrara que muchos campos son evaluado para ver si son llenados con informacion entrante, si el campo no existe o esta vacio se llena con ifo colocado apra funcionar por defecto.
   * Consulte el archivo &#x27;user.dto.ts&#x27; en &#x27;src/dto/&#x27;  para ver todos los campos.
   * @param { UserDto } dto
   * @returns { usergroup, userinfo, radcheck }
   * @todo Mover objetos a funciones u optro servicio que haga mas manejable la info.
   */
  async postUser(dto: UserDto) {
    try {
      const date &#x3D; new Date();

      const userinfo &#x3D; await this.userInfoRepository.create({
        username: dto.username,
        firstname: dto.firstname,
        lastname: dto.lastname,
        email: dto.email,
        department: dto.department ? dto.department : &#x27;No department info&#x27;,
        company: dto.company ? dto.company : &#x27;No company phone&#x27;,
        workphone: dto.workphone ? dto.workphone : &#x27;No work phone&#x27;,
        homephone: dto.homephone ? dto.homephone : &#x27;No home phone&#x27;,
        mobilephone: dto.mobilephone,
        address: dto.address ? dto.address : &#x27;No address&#x27;,
        city: dto.city ? dto.city : &#x27;No city&#x27;,
        state: dto.state ? dto.state : &#x27;No state&#x27;,
        country: dto.country ? dto.country : &#x27;Venezuela&#x27;,
        zip: dto.zip ? dto.zip : &#x27;0000&#x27;,
        notes: dto.notes ? dto.notes : &#x27;&#x27;,
        changeuserinfo: dto.changeuserinfo ? dto.changeuserinfo : &#x27;0&#x27;,
        portalloginpassword: dto.portalloginpassword
          ? dto.portalloginpassword
          : &#x27;&#x27;,
        enableportallogin: dto.enableportallogin ? dto.enableportallogin : &#x27;0&#x27;,
        creationdate: date,
        updatedate: date,
        creationby: dto.creationby,
        updateby: &#x27;No update&#x27;,
      });

      if (!userinfo) return &#x27;No se creo el usuario&#x27;;

      const radcheck &#x3D; await this.radcheckRepository.create({
        username: dto.username,
        attribute: dto.attribute, //! Pediente lista de atributos
        op: dto.op, //! Pediente lista de op
        value: dto.value,
      });

      console.log(!radcheck);

      if (!radcheck) return &#x27;No se creo el radcheck&#x27;;

      const usergroup &#x3D; await this.userGroupRepository.create({
        username: dto.username,
        groupname: dto.groupname,
        priority: dto.priority ? dto.priority : 1,
      });

      if (!usergroup) return &#x27;No se creo el usergoup&#x27;;

      return { usergroup, userinfo, radcheck };
    } catch (err) {
      return err;
    }
  }
}
</code></pre>
    </div>

</div>













                   </div><div class="search-results">
    <div class="has-results">
        <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
        <ul class="search-results-list"></ul>
    </div>
    <div class="no-results">
        <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
    </div>
</div>
</div>
               <!-- END CONTENT -->
           </div>
       </div>

          <label class="dark-mode-switch">
               <input type="checkbox">
               <span class="slider">
                    <svg class="slider-icon" viewBox="0 0 24 24" fill="none" height="20" stroke="#000" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" width="20" xmlns="http://www.w3.org/2000/svg">
                    <path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"></path>
                    </svg>
               </span>
          </label>

       <script>
            var COMPODOC_CURRENT_PAGE_DEPTH = 1;
            var COMPODOC_CURRENT_PAGE_CONTEXT = 'injectable';
            var COMPODOC_CURRENT_PAGE_URL = 'AppService.html';
            var MAX_SEARCH_RESULTS = 15;
       </script>

       <script src="../js/libs/custom-elements.min.js"></script>
       <script src="../js/libs/lit-html.js"></script>

       <script src="../js/menu-wc.js" defer></script>
       <script nomodule src="../js/menu-wc_es5.js" defer></script>

       <script src="../js/libs/bootstrap-native.js"></script>

       <script src="../js/libs/es6-shim.min.js"></script>
       <script src="../js/libs/EventDispatcher.js"></script>
       <script src="../js/libs/promise.min.js"></script>
       <script src="../js/libs/zepto.min.js"></script>

       <script src="../js/compodoc.js"></script>

       <script src="../js/tabs.js"></script>
       <script src="../js/menu.js"></script>
       <script src="../js/libs/clipboard.min.js"></script>
       <script src="../js/libs/prism.js"></script>
       <script src="../js/sourceCode.js"></script>
          <script src="../js/search/search.js"></script>
          <script src="../js/search/lunr.min.js"></script>
          <script src="../js/search/search-lunr.js"></script>
          <script src="../js/search/search_index.js"></script>
       <script src="../js/lazy-load-graphs.js"></script>


    </body>
</html>
