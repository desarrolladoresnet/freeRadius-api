<!doctype html>
<html class="no-js" lang="">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="x-ua-compatible" content="ie=edge">
        <title>free-radius-api documentation</title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <link rel="icon" type="image/x-icon" href="./images/favicon.ico">
	   <link rel="stylesheet" href="./styles/style.css">
        <link rel="stylesheet" href="./styles/dark.css">
    </head>
    <body>

        <div class="navbar navbar-default navbar-fixed-top d-block d-sm-none">
            <a href="./" class="navbar-brand">free-radius-api documentation</a>
            <button type="button" class="btn btn-default btn-menu ion-ios-menu" id="btn-menu"></button>
        </div>

        <div class="xs-menu menu" id="mobile-menu">
                <div id="book-search-input" role="search"><input type="text" placeholder="Type to search"></div>            <compodoc-menu></compodoc-menu>
        </div>

        <div class="container-fluid main">
           <div class="row main">
               <div class="hidden-xs menu">
                   <compodoc-menu mode="normal"></compodoc-menu>
               </div>
               <!-- START CONTENT -->
               <div class="content getting-started">
                   <div class="content-data">

<h1>API para freeRadius de Netcom Plus</h1>
<p align="center">

<p>Creado haciendo uso del framework Nest.JS sobre Fastify.</p>
<p><a  href="http://nestjs.com/"  target="blank"><img  src="https://nestjs.com/img/logo-small.svg"  width="200"  alt="Nest Logo" /></a></p>
<p><a  href="https://www.fastify.io/"  target="blank"><img  src="https://www.fastify.io/images/fastify-logo-menu.d13f8da7a965c800.png"  width="400"  alt="Fastify Logo" /></a></p>
</p>

  

<h2>Descripción</h2>
<h3>Descripción General</h3>
<p>La API funciona con <strong>Fastify</strong> para lograr una aplicación más ligera que la que se tendría con Express y mucho más rápida al momento de procesar las peticiones.
Como el Framework de trabajo es <strong>Nest.Js</strong> , todo el código usa <strong>TypeScript</strong>, con una arquitectura de programación orientada a objetos (OOP) dónde el modelo básico es:</p>
<p><strong>Un controlador</strong>: Encargado de manera las peticiones que entran a la API.</p>
<p><strong>Un servicio</strong>: Que contiene las distintas lógicas que soportan las funciones de la API.</p>
<p><strong>Un modulo</strong>:  Que se encarga de comunicar los distintos componentes de la API. </p>
<hr/>

<h3>Carpetas y Arquitectura general</h3>
<div><pre class="line-numbers"><code class="language-mermaid">graph LR
A[Main] --Main inicia la App --&gt; B(AppModule) 
B --&gt; C(AppController)
B --&gt; D(AppServices)
D --&gt; E(appGetService)
D --&gt; F(appPutService)
D --&gt; G(appPostService)
B --&gt; H(Sequelize)
B --&gt; I(dto)</code></pre></div><p>Aquí se puede ver la arquitectura general de la app.  Normalmente el modulo App sirve como ruta general de entrada y luego se divide en submódulos que alimentan a la app, pero dado que la aplicación tiene pocas funciones de momento, se deicidio dejarlo en un único modulo. </p>
<blockquote>
<p> Si la aplicación llega a crecer mucho se recomienda separarlo en módulos más pequeños.</p>
</blockquote>
<p>La clase AppController es quién posee las rutas (endpoints) de la app y llama a los métodos contenidos en cada uno de los servicios. Normalmente habría un solo archivo de servicios pero para mayor facilidad se separo según el tipo de petición HTTP.</p>
<p>La carpeta <strong>dto</strong> contiene las clases DTO  (Data Transfer Object), que sirven de interfaz al momento de verificar que llega a través del Body y los tipos de datos, de las distintas requests, si no cumplen con el DTO la reques se rechaza.</p>
<blockquote>
<p>Si bien se puede usar una interfaz, como tal JavaScript no posee interfaces, estas al momento de la transpilación son desechadas, perdiendo una capa de seguridad, por eso la documentación de Nest recomienda el uso de clases.</p>
</blockquote>
<p>Finalmente la carpeta <strong>Sequelize</strong> contiene la conexión a la BD. La base de datos para la aplicación se encuentra desplegada en MariaDB pero la conexion hasta el momento se a trabajado con MySql.</p>
<hr/>
  
<h3>Fastify</h3>
<p>Fastify es un framework web rápido y eficiente para Node.js. Está diseñado para ser altamente escalable y rendir al máximo, optimizando el tiempo de respuesta y el consumo de recursos. </p>
<p>No hay que preocuparse mucho por aprender a manejar este Framework, ya que por lo general la sintaxis es manejada a través de Nest.Js, sin embargo, algunos paquetes para construir la API deben ser específicos de Fastify, por lo que requerirán un manejo particular para poder funcionar, como <em>CORS</em> o <em>Helmet</em>. Consulte las documentación pertinente según el caso. </p>
<h2>Instalación</h2>
<p>Obviamente requerimos Node.js, no se ha probado con Deno.js.
Deno.js debiera poder soportar la App, dando una capa extra de seguridad y una mayor velocidad a la app.</p>
<div><pre class="line-numbers"><code class="language-bash">
$  npm  install
</code></pre></div><h2>Corriendo la app</h2>
<p>  Necesita Node.JS para correr la App.
  No se ha testeado en Deno.Js.</p>
<div><pre class="line-numbers"><code class="language-bash">
# Desarrollo

$  npm  run  start

  

# Modo watch 
#	Este modo está constantemente escuchando los cambios 
#	que se realizan en los archivos y reinicia la aplicación.

$  npm  run  start:dev

  

# Modo de producción.

$  npm  run  start:prod
</code></pre></div><h2>Test</h2>
<p>  Hasta el momento no se han escrito test para la aplicación. Nest viene con algunos test por default.</p>
<div><pre class="line-numbers"><code class="language-bash">
# unit tests

$  npm  run  test

  

# e2e tests

$  npm  run  test:e2e

  

# test coverage

$  npm  run  test:cov
</code></pre></div><h2>Rutas</h2>
<h3>Rutas Post</h3>
<h5>POST domain/</h5>
<p>Esta ruta crea un nuevo usuario de los servicios y llena las tres tablas requeridas, &quot;userinfo&quot;, &quot;radcheck&quot; y &quot;radusergroup&quot;.
Valores mínimos requerido en el Body:</p>
<div><pre class="line-numbers"><code class="language-none">JSON {

username  :	string,
password&quot; :	string,
firstname : string,
lastname  : string,
email	  : string (debe ser un formato válido),
mobilephone : string,
attribute : string,
op		  : string (de max-length 2),
value	  : araujo,
groupname :	string (plan asociado al cliente),
priority  : number,
createby&quot;:  string (del usuario que crea el objeto)

}
</code></pre></div><p>Sin embargo puede crear una respuesta aún más completa, si no llena los campos completos la API lo hace por usted colocando valores por defecto y evitando dejar espacios vacios en la BD.</p>
<div><pre class="line-numbers"><code class="language-none">JSON {
// Campos obligatorio de UserInfo
creationby	:  string,
username	:  string,
password	:  string,
firstname	:  string,
lastname	:  string,
email		:  string,
mobilephone :  string,

// No obligatorios de &quot;userinfo&quot;

department :  string;
company	   :  string;
workphone  :  string;
homephone  :  string;
address    :  string;
city       :  string;
state      :  string;
country    :  string;
zip 	   :  string;
notes	   :  string;
changeuserinfo 		:  string,
portalloginpassword	:  string,
enableportallogin	:  number,

//* RADCHECK *//
attribute	:  string,
op			:  string,
value		:  string,

//* RADUSERGROUP *//
groupname	:  string,
priority	:  number

}</code></pre></div><h3>Rutas Put</h3>
<h5>PUT domain/</h5>
<blockquote>
<p>En domain iría el nombre de dominio o IP donde se aloje la API.
Por ejemplo: <a href="https://mi-api-freeradius.com/">https://mi-api-freeradius.com/</a>
ó
ejemplo: <a href="https://64.192.2.0/">https://64.192.2.0/</a>
Compare el ejemplo dado con el ejemplo de más abajo.</p>
</blockquote>
<p>Esta ruta permite editar los valores de una fila en la tabla &quot;userinfo&quot;, por lo que solo se requiere de manera obligatoria el &quot;id&quot; que debe ser un número entero, &quot;updateby&quot; que debe ser el nombre del usuario que realiza la actualización y finalmente un cambio en alguno de los valores. De faltar alguno se rechaza la operación.</p>
<p>Retorna 0 si la operación fue exitosa o 1 su fue rechazada.</p>
<div><pre class="line-numbers"><code class="language-none">
JSON {

updateby	:  string, # campo requerido
id			:  number, 	   # campo requerido

# el resto de los campo son opcionales,
# envie los que necesite modificar.

username	:  string,
password	:  string,
firstname	:  string,
lastname	:  string,
email		:  string,
mobilephone :  string,
department  :  string,
company		:  string,
workphone	:  string,
homephone	:  string,
address		:  string,
city		:  string,
state		:  string,
country		:  string,
zip			:  string,
notes		:  string,
changeuserinfo		: string,
portalloginpassword	:string,
enableportallogin	:  number

}
</code></pre></div><br/>

<h5>PUT domain/radcheck</h5>
<p>Permite editar los valores de un fila de la tabla &quot;radcheck&quot;, requiere de manera obligatoria un &quot;id&quot; de tipo número entero para encontrar la fila a editar y y nuevo valor para realizar el cambio, de lo contrario se rechaza la operación.</p>
<blockquote>
<p>En domain iría el nombre de dominio o IP donde se aloje la API.
Por ejemplo: <a href="https://mi-api-freeradius.com/radcheck">https://mi-api-freeradius.com/radcheck</a>
ó
ejemplo: <a href="https://64.192.2.0/radcheck">https://64.192.2.0/radcheck</a>
    Compare el ejemplo dado con el ejemplo de arriba.</p>
</blockquote>
<div><pre class="line-numbers"><code class="language-none">JSON {

id			:  number, # obligatorio
username	:  string,
attribute	:  string,
op			:  string,
value		:  string;

}</code></pre></div>  <br/>
  
<h5>PUT domain/radusergroup</h5>
<p>Permite editar los valores de la tabla &quot;usergroup&quot;, esta tabla particularmente no contiene &quot;id&quot; que permitan identificar los valores contenidos, en Sequelize se usó el campo &quot;username&quot; como Primary Key, por tanto, usamos ese campo para realizar las búsquedas y la ediciones de la tabla.</p>
<div><pre class="line-numbers"><code class="language-none">JSON {

username	:  string, # obligatorio
groupname	:  string,
priority	:  number,

}</code></pre></div><h3>Rutas Get</h3>
<h5>GET domain/page/:offset</h5>
<p>Las esta ruta trabaja con paginado de los elementos de la BD en la tabla &quot;userinfo&quot;. Se debe enviar un número entero por <em>Param</em> en el <em>offset</em> dónde la primera página debe ser 0, la segunda 1, la tercera 2 etc.</p>
<p>Regresa un array de objetos &quot;userinfo&quot;.
<br/></p>
<h5>GET domain/:id</h5>
<p>Regresa un único objeto &quot;userinfo&quot;, se debe enviar un número entero por <em>Param</em> con el id del objeto a buscar. Se pretende que esta ruta sirva de ayuda para ver el detalle de un &quot;userinfo&quot; y poder editar su información.
<br/></p>
<h5>GET radcheck/page/:offset</h5>
<p>Las esta ruta trabaja con paginado de los elementos de la BD en la tabla &quot;radcheck&quot;. Se debe enviar un número entero por <em>Param</em> en el <em>offset</em> dónde la primera página debe ser 0, la segunda 1, la tercera 2 etc.</p>
<p>Regresa un array de objetos &quot;radusergroup&quot;. 
<br/></p>
<h5>GET  radcheck/:username</h5>
<p>Regresa un único objeto &quot;userinfo&quot;, se debe enviar un nombre en forma de string por <em>Param</em> con el id del objeto a buscar. Se pretende que esta ruta sirva de ayuda para ver el detalle de un &quot;radusergroup&quot; y poder editar su información.
<br/></p>
<h5>GET radcheck/:id</h5>
<p>Las esta ruta trabaja con paginado de los elementos de la BD en la tabla &quot;radcheck&quot;. Se debe enviar un número entero por <em>Param</em> en el <em>offset</em> dónde la primera página debe ser 0, la segunda 1, la tercera 2 etc.</p>
<p>Regresa un array de objetos &quot;radcheck&quot;. 
<br/></p>
<h5>GET radusergroup/:username</h5>
<p>Regresa un único objeto &quot;userinfo&quot;, se debe enviar un nombre en forma de string por <em>Param</em> con el id del objeto a buscar. Se pretende que esta ruta sirva de ayuda para ver el detalle de un &quot;radusergroup&quot; y poder editar su información.
<br/></p>
<h2>Creado por</h2>
<ul>
<li>Autor - <a href="https://github.com/FranSabt">FranSabt</a></li>
</ul>
<h2>Licencia</h2>
<p>&quot;Esta aplicación,  es <em>propiedad exclusiva</em> de <strong>NetcomPlus</strong>. Todos los derechos de propiedad intelectual relacionados con la aplicación, incluyendo, pero no limitándose a, derechos de autor, marcas comerciales y patentes, están debidamente registrados y reservados.</p>
<p> Se ha invertido tiempo, recursos y esfuerzo considerable en su creación, y su contenido, diseño, funcionalidad y características únicas son propiedad exclusiva de NetcomPlus.</p>
<p>Cualquier reproducción, distribución, modificación, adaptación o uso no autorizado de esta aplicación sin el consentimiento expreso por escrito de NetcomPlus está estrictamente prohibido. Además, queda prohibida la extracción, recopilación o uso de cualquier dato, información o contenido de esta aplicación sin la autorización correspondiente.</p>
<p>NetcomPlus se reserva el derecho de tomar las medidas legales adecuadas para proteger sus derechos de propiedad intelectual en caso de infracción. Se realizarán esfuerzos razonables para mantener la precisión y disponibilidad de la aplicación, pero NetcomPlus no se hace responsable de cualquier interrupción o daño que pueda resultar del uso de esta aplicación.</p>
<p>Al utilizar esta aplicación, aceptas cumplir con estos términos y condiciones, así como con cualquier política o guía adicional establecida por NetcomPlus. En caso de dudas o consultas sobre los derechos de propiedad intelectual de esta aplicación, puedes comunicarte con NetcomPlus.</p>
<p>Al descargar, acceder o utilizar esta aplicación, reconoces y aceptas que todos los derechos están reservados y que cualquier infracción o uso no autorizado puede dar lugar a acciones legales.</p>





















                   </div><div class="search-results">
    <div class="has-results">
        <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
        <ul class="search-results-list"></ul>
    </div>
    <div class="no-results">
        <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
    </div>
</div>
</div>
               <!-- END CONTENT -->
           </div>
       </div>

          <label class="dark-mode-switch">
               <input type="checkbox">
               <span class="slider">
                    <svg class="slider-icon" viewBox="0 0 24 24" fill="none" height="20" stroke="#000" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" width="20" xmlns="http://www.w3.org/2000/svg">
                    <path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"></path>
                    </svg>
               </span>
          </label>

       <script>
            var COMPODOC_CURRENT_PAGE_DEPTH = 0;
            var COMPODOC_CURRENT_PAGE_CONTEXT = 'getting-started';
            var COMPODOC_CURRENT_PAGE_URL = 'index.html';
            var MAX_SEARCH_RESULTS = 15;
       </script>

       <script src="./js/libs/custom-elements.min.js"></script>
       <script src="./js/libs/lit-html.js"></script>

       <script src="./js/menu-wc.js" defer></script>
       <script nomodule src="./js/menu-wc_es5.js" defer></script>

       <script src="./js/libs/bootstrap-native.js"></script>

       <script src="./js/libs/es6-shim.min.js"></script>
       <script src="./js/libs/EventDispatcher.js"></script>
       <script src="./js/libs/promise.min.js"></script>
       <script src="./js/libs/zepto.min.js"></script>

       <script src="./js/compodoc.js"></script>

       <script src="./js/tabs.js"></script>
       <script src="./js/menu.js"></script>
       <script src="./js/libs/clipboard.min.js"></script>
       <script src="./js/libs/prism.js"></script>
       <script src="./js/sourceCode.js"></script>
          <script src="./js/search/search.js"></script>
          <script src="./js/search/lunr.min.js"></script>
          <script src="./js/search/search-lunr.js"></script>
          <script src="./js/search/search_index.js"></script>
       <script src="./js/lazy-load-graphs.js"></script>


    </body>
</html>
